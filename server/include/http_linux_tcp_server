// requirement in Oct 2020
#ifndef __$__WEB_SOCKET_SERVER__2024_
#define __$__WEB_SOCKET_SERVER__2024_
#include<map>
#include<iostream>
#include<http_request>
#include<http_response>
using namespace std;
namespace wss
{
class LinuxTCPServer
{
private:
map<string,void (*)(Request &,Response &)> config;
map<int,void (*)(Request &,Response &)> error_config;
int port;
char isClientSideResource(const char *);
pair<string,map<string,string>> parseResource(const char *);
Request parseRequest(const char *);
void readClientSideResource(Request &,Response &);
//void sendResponse(int,Response &);
public:
LinuxTCPServer(int);
LinuxTCPServer(const LinuxTCPServer &)=delete;
LinuxTCPServer & operator=(const LinuxTCPServer &)=delete;
LinuxTCPServer(const LinuxTCPServer &&)=delete;
~LinuxTCPServer();
void error404(void (*)(Request &,Response &));
void error500(void (*)(Request &,Response &));
void onRequest(string,void (*)(Request &,Response &));
void sendNotFound(Request &, Response &);
void start();
};
}
#endif
